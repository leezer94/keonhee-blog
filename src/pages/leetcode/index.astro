---
import { SITE } from '@config';
import Posts from '@layouts/LeetCode.astro';
import getSortedPosts from '@utils/getSortedPosts';
import getPageNumbers from '@utils/getPageNumbers';

import { getCollection } from 'astro:content';

const posts = await getCollection('blog');

const sortedPosts = getSortedPosts(posts);

const totalPages = getPageNumbers(sortedPosts.length);

const paginatedPosts = sortedPosts
  .slice(0, SITE.postPerPage)
  .filter((post) => post.data.tags.includes('Algorithms'));
---

<Posts posts={paginatedPosts} pageNum={1} totalPages={totalPages.length} />

<script>
  import { SITE } from '@config';
  import Posts from '@layouts/LeetCode.astro';
  import getSortedPosts from '@utils/getSortedPosts';
  import getPageNumbers from '@utils/getPageNumbers';

  import { getCollection } from 'astro:content';

  const posts = await getCollection('blog');

  const sortedPosts = getSortedPosts(posts);

  const totalPages = getPageNumbers(sortedPosts.length);

  const paginatedPosts = sortedPosts
    .slice(0, SITE.postPerPage)
    .filter((post) => post.data.tags.includes('Algorithms'));
</script>
